---
title: "Reproducibility review of: Investigating drivers’ geospatial abilities in unfamiliar environments"
author: "Philipp A. Friese \\orcid{0000-0002-3124-5364}"
date: "`r format(Sys.time(), '%Y-%m-%d')`"
output:
  pdf_document:
    toc: false
papersize: a4
header-includes:
  - |
    % https://tex.stackexchange.com/questions/445563/ieeetran-how-to-include-orcid-in-tex-pdf-with-pdflatex/445583 (works with pdflatex)
    \usepackage{scalerel}
    \usepackage{tikz}
    \usepackage{caption}
    \captionsetup{labelfont={bf,small},font=small}
    
    \usetikzlibrary{svg.path}
    \definecolor{orcidlogocol}{HTML}{A6CE39}
    \tikzset{
      orcidlogo/.pic={
        \fill[orcidlogocol] svg{M256,128c0,70.7-57.3,128-128,128C57.3,256,0,198.7,0,128C0,57.3,57.3,0,128,0C198.7,0,256,57.3,256,128z};
        \fill[white] svg{M86.3,186.2H70.9V79.1h15.4v48.4V186.2z}
                     svg{M108.9,79.1h41.6c39.6,0,57,28.3,57,53.6c0,27.5-21.5,53.6-56.8,53.6h-41.8V79.1z     M124.3,172.4h24.5c34.9,0,42.9-26.5,42.9-39.7c0-21.5-13.7-39.7-43.7-39.7h-23.7V172.4z}
                     svg{M88.7,56.8c0,5.5-4.5,10.1-10.1,10.1c-5.6,0-10.1-4.6-10.1-10.1c0-5.6,4.5-10.1,10.1-10.1C84.2,46.7,88.7,51.3,88.7,56.8z};
      }
    }
    \newcommand\orcid[1]{\href{https://orcid.org/#1}{\raisebox{0.15 em}{\mbox{\scalerel*{
    \begin{tikzpicture}[yscale=-1, transform shape]
    \pic{orcidlogo};
    \end{tikzpicture}
    }{|}}}}}
    \definecolor{agileblue}{RGB}{0,77,155}
urlcolor: agileblue
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

def.chunk.hook  <- knitr::knit_hooks$get("chunk")
knitr::knit_hooks$set(chunk = function(x, options) {
  x <- def.chunk.hook(x, options)
  ifelse(options$size != "normalsize", paste0("\n \\", options$size,"\n\n", x, "\n\n \\normalsize"), x)
})
```


```{r logo, eval=TRUE, echo=FALSE, message=FALSE, fig.align='center', out.width='0.3\\linewidth', fig.pos='H'}
temp <- tempfile(fileext = ".pdf")
download.file(url = "https://reproducible-agile.github.io/public/images/reproducible-AGILE-logo-square.pdf", destfile = temp)
knitr::include_graphics(temp)
```

This report is part of the reproducibility review at the AGILE conference.
For more information see [https://reproducible-agile.github.io/](https://reproducible-agile.github.io/).
This document is published on OSF at https://osf.io/dx92a.
To cite the report use

> Friese, Philipp A. (2021, May). Reproducibility review of: Investigating drivers’ geospatial abilities in unfamiliar environments. https://doi.org/10.17605/OSF.IO/DX92A

# Reviewed paper

> Karkasina, D., Kokla, M., and Tomai, E.: Investigating drivers’ geospatial abilities in unfamiliar environments, AGILE GIScience Ser., 2, 3, https://doi.org/10.5194/agile-giss-2-3-2021, 2021.


# Summary

The updated submission contains a DASA section and provides the analysis script, dataset and questionnaires. The provided R script computes all statistical analyses presented in the paper and generates the key figure and data for both presented tables. Remaining figures comprise a participants sketch and screenshots of the study route on Google Maps and of the questionnaire, which are not relevant for reproduction. *The reproduction was successful*.

\clearpage

# Reproducibility reviewer notes

The original paper submission did not provide a Data and Software Availability section, but it was added after contacting the authors. This includes the main analysis R script, the compiled dataset, questionnaires and accompanying explanations. 

The submission contains one key figure (Fig. 4) and two tables (Table 1 and 2) which are relevant for reproduction. The remaining figures comprise a screenshot of Google Maps showing the study route (Fig. 1), a participant's sketch of the route (Fig. 2) and a screenshot of the questionnaire (Fig. 3). 

Initial execution of the analysis script raised errors while generating Fig. 4. This was however resolved after contacting the authors and Fig. 4 was reproduced. The generated image is shown in Figure 1.

```{r, echo=FALSE,out.width="80%", out.height="40%",fig.cap="Average absolute (blue) and real relative (red) estimation error - corresponds to Figure 1 in reproduced paper",fig.show='hold',fig.align='center'}
knitr::include_graphics(c('estimated_errors.png'))
```

Table 1 and 2 were not generated automatically but instead the corresponding values where printed to the console. After extracting these values and exporting them to .csv files, both tables were reproduced. Refer to Table 1 and 2 in this report, which contain the raw values generated by the script. 

```{r, echo=FALSE, fig.align='center'}
data <- read.table("correlations_group_1.csv", sep=";", header=TRUE, check.names=FALSE)
knitr::kable(data, caption="Spearman correlations Group 1 - corresponds to Table 1 in reproduced paper")
```

```{r, echo=FALSE, fig.align='center'}
data <- read.table("correlations_group_2.csv", sep=";", header=TRUE, check.names=FALSE)
knitr::kable(data, caption="Spearman correlations Group 2 - corresponds to Table 2 in reproduced paper")
```

The OSF repository at https://osf.io/dx92a contains the generated image shown in Figure 1, the .csv files for Table 1 and 2 and an excerpt of the R script output.

# Comments to the authors

The provided analysis script only generates Figure 1. The values for Table 1 and 2 are printed to the console without further labels and the tables have to be compiled manually. *I recommend adding a script for automatically generating Table 1 and 2 or writing the values to a .csv file.*

The R script contains helpful comments but no further formatting and I found it hard to associate the output with the values for Table 1 and 2. *I recommend formatting the R script according to best practices such as the tidyverse style guide at [https://style.tidyverse.org](https://style.tidyverse.org).*

The provided readme comprises a description of the files included in the DASA section. However it does not contain associations between files or scripts and the figures or tables they generate. *I recommend adding a statement associating scripts or functions to figures and tables in your paper.* [Addressed by authors]


```{r, echo=FALSE, eval=FALSE, results='hide'}
# create ZIP of reproduction files and upload to OSF
library("zip")
library("here")
zipfile <- "agile-reproducibility-review-2021-024.zip"
file.remove(zipfile)
zip::zipr(zipfile,
         c("correlations_group_1.csv",
           "correlations_group_2.csv",
           "estimated_errors.png",
           "analysis_script_output.txt"))

library("osfr") # See docs at https://docs.ropensci.org/osfr/
# OSF_PAT is in .Renviron in parent directory

# retrieve project
project <- osfr::osf_retrieve_node("dx92a")

# upload files
osfr::osf_upload(x = project,
                conflicts = "overwrite",
                path = c(list.files(here::here("024"),
                                    pattern = "agile-reproducibility-review-.*(pdf$|Rmd$|zip$)",
                                    full.names = TRUE)
                         #,"COPYRIGHT"
                         )
                )
```